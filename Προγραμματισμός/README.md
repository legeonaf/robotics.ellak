# Ο προγραμματισμός

## Ψηφιακά Pins του Arduino που χρησιμοποιήθηκαν
A/A | Εξάρτημα | Digital Pin
------| ------------|-----------
1 | Φώτα ορόφου  | D3
2 | Φώτα εισογείου  |  D4
3 | Διακόπτης φώτων  |  D5
4 | Διακόπτης Μάντρας  |  D6
5 | Ηχείο  |  D8
6 | Μαγνητική Επαφή Πόρτας |  D9
7 | Servo κινητήρας Μάντρας  |  D11
8 | Servo κινητήρας Τέντας  |  D12
9 | Led Θέρμανσης  |  D13


## Αναλογικά Pins που χρησιμοποιήθηκαν

A/A | Εξάρτημα | Analog Pin
------| ------------|-----------
1 | Αισθητήρας θερμοκρασίας LM 35 | Α1
2 | Αισθητήρας Φωτός | Α2
3 | Οθόνη LCD 16x2  |  A4 - A5

## Λειτουργίες του έξυπνου σπιτιού
Οι λειτουργίες που προγραμματιστηκαν  είναι οι εξής:
- Άνοιγμα/κλείσιμο των εσωτερικών φώτων του σπιτιού
- Άνοιγμα/κλείσιμο της τέντας αυτόματα ανιχνεύοντας το φώς που χτυπάει το σπίτι και βάσει της θερμοκρασίας του σπιτιού
- Άνοιγμα/κλείσιμο της αυλόπορτας με το πάτημα ενός κουμπιού
- Άνοιγμα/κλείσιμο του καλοριφέρ του σπιτιού βάσει της θερμοκρασίας του
- Προβολή στην οθόνη της θερμοκρασίας του σπιτιού και του φωτός που το χτυπάει
- Ενεργοποίηση συναγερμού με το άνοιγμα της πόρτας

## Ο προγραμματισμός και ο κώδικας
Ο προγραμματισμός της μακέτας έγινε με το mBlock, σε περιβάλλον scratch.

###  Δημιουργία μεταβλητών
Το πρώτο βήμα στον προγραμματισμό είναι η δημιουργία των μεταβλητών που θα χρησιμοποιήσουμε.

![image](x.png)

Γράφουμε το pin στο οποίο συνδέεται το εξάρτημα του οποίου την μεταβλητή δημιουργούμε και το όνομα του εξαρτήματος (το όνομα της μεταβλητής δεν έχει σημασία αρκεί να μπορούμε να ξεχωρήσουμε σε ποιό εξάρτημα αντιστοιχεί τι). Αφού φτιάξουμε τις μεταβλητές για όλα τα pins μετά φτιάχνουμε τις βοηθητικές, ΘερμοκρασίαΒάσης, Temp, Voltage, οι οποίες δεν αντιστοιχούν σε κάποιο pin και απλά παίρνουν μια τιμή για να βοηθήσουν στον κώδικα.

### Ορισμός μεταβλητών
Τώρα αφού έχουμε δημιουργήσει τις μεταβλητές είναι η ώρα να τους δώσουμε μία τιμή ή να τις ορίσουμε σε ένα pin.

![image](settingx.png)

### Reset της οθόνης
Κάθε φορά που ανοίγει το Arduino και ξανατρέχει το πρόγραμμα υπάρχουν δύο εντολές που πρέπει να γίνουν. >>>>

![image](lcdclearing.png)

### Ο διακόπτης της πόρτας
Το πρώτο κομμάτι του κώδικα είναι ο προγραμματισμός του διακόπτη που ανοίγει την αυλόπορτα.

![image](gateswitch.png)

Ορίζουμε την μεταβλητή του διακόπτη να διαβάσει το digital pin 6. Άν ο διακόπτης είναι κλειστός και παιρνάει ρεύμα, άρα είναι Χ>0, τότε ο κινητήρας θα κινηθεί 90 μοίρες αλλιώς θα παραμείνει στις 0.

### Διακόπτης φώτων
Για τον προγραμματισμό του διακόπτη των φώτων θα χρησιμοποιήσουμε την ίδια λογική με τον προηγούμενο διακόπτη μόνο που τώρα θα στείλουμε ή θα κόψουμε το ρεύμα σε δύο pins ταυτόχρονα.

![image](lightswitchsss.png)

### Μαγνητική επαφή
Για την μαγνητική επαφή ορίζουμε την μεταβλητή της να διαβάσει το pin 9 για input και άμα δεν περνάει ρεύμα, δηλαδή είναι Χ=0, τότε βάζουμε το pin 8, το buzzer, να παίξει ένα τόνο που μοιάζει με συναγερμό.

![image](magneticcontacts.png)

###

[Αρχική Σελίδα έργου](https://github.com/legeonaf/robotics.ellak)
